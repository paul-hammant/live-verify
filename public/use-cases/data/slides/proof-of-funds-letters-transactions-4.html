<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Step 4: Verification - Proof of Funds Verification</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: linear-gradient(135deg, #003366 0%, #004a99 100%);
            min-height: 100vh;
            padding: 40px 20px;
            color: white;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        .step-indicator {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 12px;
            margin-bottom: 30px;
        }
        .nav-arrow {
            padding: 8px 16px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 500;
            font-size: 14px;
            transition: all 0.2s;
        }
        .nav-arrow.prev {
            background: rgba(255,255,255,0.2);
            color: white;
            margin-right: 20px;
        }
        .nav-arrow.prev:hover {
            background: rgba(255,255,255,0.3);
        }
        .nav-arrow.next {
            background: #ffd700;
            color: #003366;
            margin-left: 20px;
        }
        .nav-arrow.next:hover {
            background: #ffec80;
        }
        .step {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
        }
        .step.active {
            background: #ffd700;
            color: #003366;
            box-shadow: 0 0 20px rgba(255,215,0,0.5);
        }
        .step.completed {
            background: #22c55e;
        }
        h1 {
            text-align: center;
            margin-bottom: 10px;
            font-size: 1.8em;
        }
        .subtitle {
            text-align: center;
            opacity: 0.8;
            margin-bottom: 30px;
        }
        .card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            color: #333;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        .card h2 {
            color: #004a99;
            margin-bottom: 20px;
            font-size: 1.3em;
        }
        .request-flow {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 20px 0;
            gap: 20px;
        }
        .endpoint {
            flex: 1;
            text-align: center;
        }
        .endpoint .icon {
            font-size: 48px;
            margin-bottom: 10px;
        }
        .endpoint .label {
            font-weight: bold;
            color: #004a99;
        }
        .arrow-flow {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #ffd700;
        }
        .arrow-flow .arrow {
            font-size: 24px;
            color: #004a99;
        }
        .arrow-flow .label {
            font-size: 11px;
            color: #64748b;
            max-width: 80px;
            text-align: center;
        }
        .url-box {
            background: #1e293b;
            color: #f8fafc;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            padding: 7px;
            border-radius: 8px;
            margin: 20px 0;
            word-break: break-all;
        }
        .url-box .method {
            color: #22c55e;
            font-weight: bold;
        }
        .url-box .domain {
            color: #60a5fa;
        }
        .url-box .path {
            color: #fbbf24;
        }
        .url-box .hash {
            color: #a78bfa;
        }
        .response-box {
            background: #f8fafc;
            border: 2px solid #22c55e;
            border-radius: 8px;
            padding: 7px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }
        .response-box .status {
            color: #22c55e;
            font-weight: bold;
        }
        .explanation {
            margin-top: 20px;
            padding: 7px;
            background: #e6f0ff;
            border-left: 4px solid #004a99;
            border-radius: 0 8px 8px 0;
        }
        .trust-chain {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        .trust-item {
            background: #ecfdf5;
            border: 1px solid #22c55e;
            border-radius: 20px;
            padding: 8px 16px;
            font-size: 12px;
            color: #166534;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="step-indicator">
            <a href="proof-of-funds-letters-transactions-3.html" class="nav-arrow prev">&larr;</a>
            <div class="step completed">1</div>
            <div class="step completed">2</div>
            <div class="step completed">3</div>
            <div class="step active">4</div>
            <div class="step">5</div>
            <a href="proof-of-funds-letters-transactions-5.html" class="nav-arrow next">&rarr;</a>
        </div>

        <h1>Step 4: Verification</h1>
        <p class="subtitle">Check the hash against the bank's domain</p>

        <div class="card">
            <h2>The hash is sent to the bank's verification endpoint...</h2>

            <div class="request-flow">
                <div class="endpoint">
                    <div class="icon">&#x1F4BB;</div>
                    <div class="label">Your Browser</div>
                </div>
                <div class="arrow-flow">
                    <span class="arrow">&rarr;</span>
                    <span class="label">Hash only (not the balance)</span>
                </div>
                <div class="endpoint">
                    <div class="icon">&#x1F3E6;</div>
                    <div class="label">chase.com/v/</div>
                </div>
            </div>

            <div class="url-box">
                <span class="method">GET</span> https://<span class="domain">chase.com</span><span class="path">/v/</span><span class="hash" id="hash-in-url">...</span>
            </div>

            <div class="response-box">
                <span class="status">HTTP 200 OK</span><br><br>
                { "status": "OK" }
            </div>

            <div class="explanation">
                <strong>Domain-bound trust:</strong> The verification URL in the POF (<code>verify:chase.com/v</code>) tells your browser exactly which domain to check. The response comes from Chase's own servers. If the hash matches, it proves Chase issued this exact POF with this exact balance.
            </div>

            <div class="trust-chain">
                <div class="trust-item">&#10003; HTTPS encrypted</div>
                <div class="trust-item">&#10003; Bank domain verified</div>
                <div class="trust-item">&#10003; Hash matched</div>
            </div>

            <div style="margin-top: 20px; padding: 12px; background: #fef3c7; border-left: 4px solid #f59e0b; border-radius: 0 8px 8px 0; font-size: 12px; color: #92400e;">
                <strong>Note:</strong> chase.com/v is an illustrative example. This demonstrates how verification could work if banks adopted this approach for their Proof of Funds letters.
            </div>
        </div>
    </div>

    <script>
        async function computeHash() {
            const text = `SARAH JANE SMITH
4521 PARKVIEW DRIVE
GREENWICH, CT 06830

AVAILABLE BALANCE CONFIRMATION

DATE:           MARCH 15, 2026
ACCOUNT NO:     7892456310000
SWIFT NO:       CHASUS33XXX
ACCOUNT TYPE:   PRIVATE CLIENT MONEY MARKET
BALANCE:        USD 1,250,000.00
DESCRIPTION:    VERIFICATION OF FUNDS

We, JPMorgan Chase Bank, N.A., confirm that our client, SARAH JANE SMITH, currently has available on deposit USD 1,250,000.00. The funds are available for immediate use. This letter puts no financial obligation on said funds. These funds are clear of any holds, liens, or encumbrances.

James W. Gordon
Vice President, Private Client Banking
270 Park Avenue, 12th Floor
New York, NY 10017
Ph (212) 270-6000
Fx (212) 270-6001

verify:chase.com/v`;

            const encoder = new TextEncoder();
            const data = encoder.encode(text);
            const hashBuffer = await crypto.subtle.digest('SHA-256', data);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');

            document.getElementById('hash-in-url').textContent = hashHex;
        }

        computeHash();
    </script>
</body>
</html>
